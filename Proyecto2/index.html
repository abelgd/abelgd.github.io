<!doctype html>
<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Proyecto 2: Gu√≠a para bastionar el arranque de Ubuntu Server</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/claat-public/codelab-elements.css">

  <style>
    :root {
      --title-font: Georgia, "Times New Roman", Times, serif;
    }

    /* ========== TEMA CLARO (Predeterminado Google Codelabs) ========== */
    body {
      background: #ffffff !important;
      color: #202124 !important;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    #codelab-title,
    #main-toolbar,
    google-codelab {
      background: #f8f9fa !important;
      --primary-color: #1a73e8 !important;
      --secondary-color: #5f6368 !important;
    }

    h1, h2, h3, h4, h5, h6 {
      color: #202124 !important;
      font-family: var(--title-font) !important;
      font-weight: 300 !important;
    }

    #drawer,
    #steps {
      background: #ffffff !important;
      border-right: 1px solid #dadce0 !important;
    }

    .step {
      color: #202124 !important;
      background: #ffffff !important;
      border-left: 3px solid transparent !important;
      transition: all 0.3s ease !important;
    }

    .step.selected {
      color: #1a73e8 !important;
      background: rgba(26, 115, 232, 0.08) !important;
      border-left-color: #1a73e8 !important;
    }

    .step:hover {
      color: #202124 !important;
      background: #f8f9fa !important;
      border-left-color: #1a73e8 !important;
    }

    #drawer h2,
    #drawer h3,
    #drawer span,
    #drawer div,
    #steps h2,
    #steps h3,
    #steps span,
    #steps div {
      color: #202124 !important;
    }

    #codelab-step,
    .instructions {
      background: #ffffff !important;
      color: #202124 !important;
    }

    p, li, td, th, span, label {
      color: #202124 !important;
    }

    a {
      color: #1a73e8 !important;
      text-decoration: none !important;
      border-bottom: 1px solid rgba(26, 115, 232, 0.3) !important;
      transition: all 0.3s ease !important;
    }

    a:hover {
      color: #174ea6 !important;
      border-bottom-color: rgba(26, 115, 232, 0.6) !important;
    }

    pre,
    code,
    .prettyprint {
      background: #f1f3f4 !important;
      color: #202124 !important;
      border: 1px solid #dadce0 !important;
      border-radius: 4px !important;
    }

    aside {
      background: #e8f0fe !important;
      border-left: 4px solid #1a73e8 !important;
      color: #202124 !important;
      padding: 16px 20px !important;
      border-radius: 4px !important;
    }

    table {
      background: #ffffff !important;
      border: 1px solid #dadce0 !important;
    }

    th {
      background: #f8f9fa !important;
      color: #202124 !important;
      border-bottom: 2px solid #dadce0 !important;
    }

    td {
      border: 1px solid #dadce0 !important;
    }

    tr:hover {
      background: #f8f9fa !important;
    }

    paper-button,
    button,
    .codelab-fab {
      background: #1a73e8 !important;
      color: #ffffff !important;
      border: none !important;
      transition: all 0.3s ease !important;
    }

    paper-button:hover,
    button:hover {
      background: #174ea6 !important;
    }

    img {
      border: 1px solid #dadce0 !important;
      border-radius: 6px !important;
      background: #ffffff !important;
      padding: 8px !important;
      max-width: 100% !important;
    }

    #codelab-footer {
      background: #f8f9fa !important;
      border-top: 1px solid #dadce0 !important;
      color: #5f6368 !important;
    }

    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f8f9fa;
    }

    ::-webkit-scrollbar-thumb {
      background: #dadce0;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #bdc1c6;
    }

    /* ========== TEMA OSCURO ========== */
    [data-theme="dark"] {
      --codelab-bg: #0b0b0b;
      --codelab-surface: #151515;
      --codelab-text: #cccccc;
      --codelab-text-muted: #888888;
      --codelab-accent: #8fb3ff;
      --codelab-border: rgba(255,255,255,0.1);
    }

    [data-theme="dark"] body {
      background: var(--codelab-bg) !important;
      color: var(--codelab-text) !important;
    }

    [data-theme="dark"] #codelab-title,
    [data-theme="dark"] #main-toolbar,
    [data-theme="dark"] google-codelab {
      background: var(--codelab-surface) !important;
      --primary-color: var(--codelab-accent) !important;
      --secondary-color: var(--codelab-text-muted) !important;
    }

    [data-theme="dark"] h1,
    [data-theme="dark"] h2,
    [data-theme="dark"] h3,
    [data-theme="dark"] h4,
    [data-theme="dark"] h5,
    [data-theme="dark"] h6 {
      color: #ffffff !important;
    }

    [data-theme="dark"] #drawer,
    [data-theme="dark"] #steps {
      background: #000000 !important;
      border-right: 1px solid var(--codelab-border) !important;
    }

    [data-theme="dark"] #drawer *,
    [data-theme="dark"] #steps * {
      background: transparent !important;
    }

    [data-theme="dark"] .step {
      color: #ffffff !important;
      background: #000000 !important;
    }

    [data-theme="dark"] .step.selected {
      color: #ffffff !important;
      background: rgba(143, 179, 255, 0.15) !important;
      border-left-color: var(--codelab-accent) !important;
    }

    [data-theme="dark"] .step:hover {
      color: #ffffff !important;
      background: rgba(255, 255, 255, 0.08) !important;
      border-left-color: var(--codelab-accent) !important;
    }

    [data-theme="dark"] #drawer h2,
    [data-theme="dark"] #drawer h3,
    [data-theme="dark"] #drawer span,
    [data-theme="dark"] #drawer div,
    [data-theme="dark"] #steps h2,
    [data-theme="dark"] #steps h3,
    [data-theme="dark"] #steps span,
    [data-theme="dark"] #steps div {
      color: #ffffff !important;
    }

    [data-theme="dark"] #codelab-step,
    [data-theme="dark"] .instructions {
      background: var(--codelab-bg) !important;
      color: var(--codelab-text) !important;
    }

    [data-theme="dark"] p,
    [data-theme="dark"] li,
    [data-theme="dark"] td,
    [data-theme="dark"] th,
    [data-theme="dark"] span,
    [data-theme="dark"] label {
      color: var(--codelab-text) !important;
    }

    [data-theme="dark"] a {
      color: var(--codelab-accent) !important;
      border-bottom: 1px solid rgba(143,179,255,0.3) !important;
    }

    [data-theme="dark"] a:hover {
      color: #ffffff !important;
      border-bottom-color: rgba(143,179,255,0.6) !important;
    }

    [data-theme="dark"] pre,
    [data-theme="dark"] code,
    [data-theme="dark"] .prettyprint {
      background: #1a1a1a !important;
      color: #e0e0e0 !important;
      border: 1px solid var(--codelab-border) !important;
    }

    [data-theme="dark"] aside {
      background: rgba(255,255,255,0.02) !important;
      border-left: 4px solid var(--codelab-accent) !important;
      color: var(--codelab-text) !important;
    }

    [data-theme="dark"] table {
      background: var(--codelab-surface) !important;
      border: 1px solid var(--codelab-border) !important;
    }

    [data-theme="dark"] th {
      background: rgba(255,255,255,0.05) !important;
      color: #ffffff !important;
      border-bottom: 2px solid var(--codelab-border) !important;
    }

    [data-theme="dark"] td {
      border: 1px solid var(--codelab-border) !important;
    }

    [data-theme="dark"] tr:hover {
      background: rgba(255,255,255,0.02) !important;
    }

    [data-theme="dark"] paper-button,
    [data-theme="dark"] button,
    [data-theme="dark"] .codelab-fab {
      background: transparent !important;
      color: #ffffff !important;
      border: 1px solid rgba(255,255,255,0.3) !important;
    }

    [data-theme="dark"] paper-button:hover,
    [data-theme="dark"] button:hover {
      background: rgba(255,255,255,0.05) !important;
      border-color: #ffffff !important;
    }

    [data-theme="dark"] img {
      border: 1px solid var(--codelab-border) !important;
      background: #ffffff !important;
    }

    [data-theme="dark"] #codelab-footer {
      background: var(--codelab-surface) !important;
      border-top: 1px solid var(--codelab-border) !important;
      color: var(--codelab-text-muted) !important;
    }

    [data-theme="dark"] ::-webkit-scrollbar-track {
      background: var(--codelab-surface);
    }

    [data-theme="dark"] ::-webkit-scrollbar-thumb {
      background: rgba(255,255,255,0.2);
    }

    [data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
      background: rgba(255,255,255,0.3);
    }

    /* ========== BOT√ìN TOGGLE ========== */
    .theme-toggle-btn {
      position: fixed;
      top: 16px;
      right: 16px;
      z-index: 10000;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid #dadce0 !important;
      background: #ffffff !important;
      color: #202124 !important;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
    }

    .theme-toggle-btn:hover {
      transform: scale(1.1) rotate(180deg);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    /* Fondo del bot√≥n en tema OSCURO */
    [data-theme="dark"] .theme-toggle-btn {
      background: #0b0b0b !important;
      border-color: rgba(255,255,255,0.2) !important;
      color: #e8eaed !important;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    [data-theme="dark"] .theme-toggle-btn:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
      border-color: rgba(255,255,255,0.4) !important;
    }

    /* Ajustar posici√≥n del tiempo restante para dejar espacio al toggle */
    #codelab-title {
      padding-right: 70px !important;
    }

    .success {
      color: #1e8e3e !important;
    }

    .error {
      color: #d93025 !important;
    }

    [data-theme="dark"] .success {
      color: #66bb6a !important;
    }

    [data-theme="dark"] .error {
      color: #ff5252 !important;
    }
  </style>
</head>
<body>
  <!-- Bot√≥n toggle de tema -->
  <button id="theme-toggle" class="theme-toggle-btn" aria-label="Cambiar tema">
    <span id="theme-icon">üåì</span>
  </button>

  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid="ID de Google Analytics"
                  id="identificador2"
                  title="Proyecto 2: Gu√≠a para bastionar el arranque de Ubuntu Server"
                  environment="web"
                  feedback-link="https://github.com/abelgd/abelgd.github.io/issues/1">

    <google-codelab-step label="Introducci√≥n" duration="3">
      <p>El proceso de arranque de un sistema operativo es una fase cr√≠tica en la que se cargan los componentes esenciales del sistema.<br> Bastionar el arranque de <strong>Ubuntu Server</strong> consiste en aplicar configuraciones y medidas de seguridad que garanticen la <strong>integridad</strong>, <strong>confidencialidad</strong> y <strong>autenticidad</strong> del sistema desde el momento en que se enciende el equipo.</p>
<p>El objetivo de esta gu√≠a es proporcionar una base t√©cnica y estructurada para asegurar el arranque de Ubuntu, reduciendo riesgos de manipulaci√≥n o acceso no autorizado durante las fases iniciales del sistema.</p>
<h3 is-upgraded>Autor: <em>Abel Garc√≠a Dom√≠nguez</em></h3>
    </google-codelab-step>

    <google-codelab-step label="Configuraci√≥n y medidas de bastionado del arranque" duration="2">
      <p>En esta pr√°ctica se realizar√° la instalaci√≥n y configuraci√≥n segura de <strong>Ubuntu Server 24.04.3 LTS (minimized)</strong>, aplicando medidas de seguridad desde el proceso de instalaci√≥n.<br> El bastionado comienza en el propio instalador, donde definiremos una estructura de particiones cifradas y configuraciones de arranque seguras.</p>
<h2 is-upgraded>Requisitos previos</h2>
<p>Antes de comenzar, aseg√∫rate de contar con los siguientes elementos:</p>
<ul>
<li>Imagen ISO de Ubuntu Server 24.04.3 LTS: <em>ubuntu-24.04.3-live-server-amd64.iso</em></li>
<li>M√°quina virtual o equipo f√≠sico preparado para la instalaci√≥n.</li>
</ul>
<h2 is-upgraded>Medida de seguridad inicial: adaptador de red activo hasta el mirror</h2>
<ul>
<li>Antes de iniciar la instalaci√≥n, se debe <strong>mantener el adaptador de red activado</strong> para permitir que el instalador configure correctamente los componentes de red del sistema y detecte los recursos necesarios al finalizar la instalaci√≥n.</li>
<li>Una vez alcanzado el paso del <strong>mirror (Ubuntu archive mirror)</strong>, se proceder√° a <strong>desactivar el adaptador de red</strong> para evitar la descarga de paquetes desde fuentes externas no verificadas.</li>
<li>El adaptador de red <strong>se volver√° a activar</strong> una vez completada la instalaci√≥n, justo antes de la configuraci√≥n del GRUB.</li>
</ul>
    </google-codelab-step>

    <google-codelab-step label="Instalaci√≥n de Ubuntu Server 24.04.3 LTS" duration="8">
      <h2 is-upgraded>Paso 1: Iniciar la instalaci√≥n</h2>
<ol type="1">
<li>Inicia la m√°quina virtual utilizando la ISO: <em>ubuntu-24.04.3-live-server-amd64.iso</em>. Selecciona la opci√≥n <em>Omitir la instalaci√≥n desatendida</em></li>
<li>En el men√∫ inicial, selecciona la opci√≥n: <em>Try or Install Ubuntu Server</em></li>
</ol>
<p class="image-container"><img alt="Imagen1" src="img\47f86acaa9f31dba.png"></p>
<ol type="1" start="3">
<li>Elige el idioma de instalaci√≥n y pulsa <em>Enter</em></li>
</ol>
<p class="image-container"><img alt="Imagen2" src="img\1a05b1867ad59fc3.png"></p>
<ol type="1" start="4">
<li>Configura el dise√±o de teclado seg√∫n corresponda.</li>
</ol>
<p class="image-container"><img alt="Imagen3" src="img\ce80f12a6f6882b2.png"></p>
<ol type="1" start="5">
<li>En la pantalla <strong>"Choose the type of installation"</strong>, selecciona: <em>Ubuntu Server (minimized)</em></li>
</ol>
<ul>
<li>Esta opci√≥n instala un sistema base reducido, m√°s seguro y sin paquetes innecesarios.</li>
</ul>
<p class="image-container"><img alt="Imagen4" src="img\bb791cfbbcc2f141.png"></p>
<h2 is-upgraded>Paso 2: Configuraci√≥n de red, proxy y mirror</h2>
<p>Durante la instalaci√≥n, se presentan tres apartados relacionados con la conectividad y descarga de paquetes:</p>
<ul>
<li><strong>Configuraci√≥n de red (Network connections)</strong></li>
<li><strong>Proxy</strong></li>
<li><strong>Mirror del repositorio (Ubuntu archive mirror)</strong></li>
</ul>
<p>En nuestro caso, <strong>omitiremos su configuraci√≥n manual</strong> por motivos de seguridad y control de entorno.</p>
<ul>
<li><strong>Al llegar al paso del mirror</strong>, se debe <strong>desactivar el adaptador de red.</strong></li>
</ul>
<h2 is-upgraded>Paso 3: Configuraci√≥n del almacenamiento</h2>
<p>En este apartado se definir√° el esquema de particiones del sistema.<br> El objetivo es crear una estructura <strong>segura y cifrada</strong>, protegiendo los datos desde el arranque.</p>
<ol type="1">
<li>En la pantalla <strong>"Guided storage configuration"</strong>, selecciona: <em>Custom storage layout</em></li>
</ol>
<p class="image-container"><img alt="Imagen5" src="img\adf93eba505f15c5.png"></p>
<p>Esta opci√≥n permite definir manualmente las particiones del sistema, garantizando un mayor control sobre su estructura y posibilitando la aplicaci√≥n de cifrado en los vol√∫menes de datos.</p>
<ol type="1" start="2">
<li>Aparecer√° la interfaz <strong>"Storage configuration"</strong>, donde se mostrar√° el disco disponible. Desde esta interfaz se crear√°n:</li>
</ol>
<p class="image-container"><img alt="Imagen6" src="img\6633e6adf6132a34.png"></p>
<h2 is-upgraded>Estructura de particionado recomendada</h2>
<table>
<tr><td colspan="1" rowspan="1"><p>Punto de montaje</p>
</td><td colspan="1" rowspan="1"><p>Tama√±o aproximado</p>
</td><td colspan="1" rowspan="1"><p>Cifrado</p>
</td><td colspan="1" rowspan="1"><p>Descripci√≥n</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p><code>/boot</code></p>
</td><td colspan="1" rowspan="1"><p>1 GB</p>
</td><td colspan="1" rowspan="1"><p>No</p>
</td><td colspan="1" rowspan="1"><p>Contiene el kernel y archivos de arranque</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>Espacio restante</p>
</td><td colspan="1" rowspan="1"><p>Todo el disco</p>
</td><td colspan="1" rowspan="1"><p>S√≠</p>
</td><td colspan="1" rowspan="1"><p>Volumen LUKS cifrado con LVM</p>
</td></tr>
</table>
<h2 is-upgraded>Pasos de configuraci√≥n del disco</h2>
<ol type="1">
<li>Crear partici√≥n <code>/boot</code> (1 GB) sin cifrar.</li>
<li>Crear una segunda partici√≥n con el resto del espacio sin formato.</li>
<li>Crear un <strong>grupo de vol√∫menes LVM</strong> sobre esa partici√≥n.</li>
<li>Activar <strong>cifrado LUKS</strong> y establecer una contrase√±a segura.</li>
<li>Crear los siguientes vol√∫menes l√≥gicos dentro del grupo cifrado:</li>
</ol>
<table>
<tr><td colspan="1" rowspan="1"><p>Volumen</p>
</td><td colspan="1" rowspan="1"><p>Punto de montaje</p>
</td><td colspan="1" rowspan="1"><p>Tama√±o aprox.</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>root</p>
</td><td colspan="1" rowspan="1"><p>(<code>/</code>)</p>
</td><td colspan="1" rowspan="1"><p>10 GB</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>home</p>
</td><td colspan="1" rowspan="1"><p>(<code>/home</code>)</p>
</td><td colspan="1" rowspan="1"><p>6 GB</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>var</p>
</td><td colspan="1" rowspan="1"><p>(<code>/var</code>)</p>
</td><td colspan="1" rowspan="1"><p>4 GB</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>tmp</p>
</td><td colspan="1" rowspan="1"><p>(<code>/tmp</code>)</p>
</td><td colspan="1" rowspan="1"><p>1.5 GB</p>
</td></tr>
<tr><td colspan="2" rowspan="1"><p>swap</p>
</td><td colspan="1" rowspan="1"><p>2 GB</p>
</td></tr>
</table>
<p>Esta estructura segmenta el sistema en diferentes √°reas protegidas y evita que fallos en una partici√≥n afecten a las dem√°s.</p>
<h2 is-upgraded>Paso 4: Finalizaci√≥n de la instalaci√≥n</h2>
<ol type="1">
<li>Crear el usuario administrador y establecer la contrase√±a.</li>
</ol>
<p class="image-container"><img alt="Imagen7" src="img\aabeeea4be300234.png"></p>
<ol type="1" start="2">
<li>Omitir <strong>Ubuntu Pro</strong> y <strong>SSH</strong> durante la instalaci√≥n.</li>
</ol>
<p class="image-container"><img alt="Imagen8" src="img\cf89f5bc1c60c639.png"></p>
<ol type="1" start="3">
<li>Una vez completada, reiniciar el sistema.</li>
</ol>
<p class="image-container"><img alt="Imagen9" src="img\e2cf4a3c424c7ce9.png"></p>
<ol type="1" start="4">
<li>Iniciar sesi√≥n y <strong>verificar las particiones:</strong></li>
</ol>
<p class="image-container"><img alt="Imagen10" src="img\f33aea0345eca1.png"></p>
    </google-codelab-step>

    <google-codelab-step label="Configuraci√≥n posterior al arranque y bastionado del sistema" duration="6">
      <p>Una vez finalizada la instalaci√≥n del sistema, se proceder√° a aplicar medidas de seguridad adicionales sobre el arranque, el kernel y los puntos de montaje.<br> El objetivo de este apartado es <strong>reforzar la integridad del sistema</strong> frente a accesos no autorizados o manipulaciones en las fases iniciales del arranque.</p>
<h2 is-upgraded>Paso 5: Reactivar el adaptador de red e instalar utilidades</h2>
<p>Antes de continuar con la configuraci√≥n del GRUB, es necesario <strong>reactivar el adaptador de red</strong> para poder instalar las herramientas requeridas. Actualizar los repositorios e instalar el editor <strong>'nano'</strong>.</p>
<h2 is-upgraded>Paso 6: Configuraci√≥n segura del gestor de arranque (GRUB)</h2>
<p>El gestor de arranque <strong>GRUB</strong> ser√° protegido mediante una contrase√±a cifrada, impidiendo el acceso no autorizado al men√∫ de arranque o la modificaci√≥n de par√°metros cr√≠ticos del sistema.</p>
<h3 is-upgraded>6.1 Generar el hash PBKDF2</h3>
<p>Ejecuta el siguiente comando para generar el hash de la contrase√±a del GRUB: <strong><em>sudo grub-mkpasswd-pbkdf2</em></strong></p>
<p class="image-container"><img alt="Imagen11" src="img\e3df0c1a444ab550.png"></p>
<h3 is-upgraded>6.2 Crear una copia de seguridad y configurar el archivo /etc/grub.d/40_custom</h3>
<ul>
<li>Antes de modificar el archivo, <strong>realiza una copia de seguridad</strong> para poder restaurarlo en caso de error: <strong><em>sudo cp /etc/grub.d/40_custom /etc/grub.d/40_custom.bak</em></strong></li>
<li>Abrir y editar el archivo personalizado del GRUB: <strong><em>sudo nano /etc/grub.d/40_custom</em></strong></li>
<li>A√±adir el siguiente comando: <strong><em>set superusers="grubadmin" password_pbkdf2 grubadmin grub.pbkdf2.sha512.100000.[HASH_GENERADO]</em></strong></li>
</ul>
<p><img alt="Imagen12" src="img\55ac54469eb5b61f.png"></p>
<p>El usuario <em>admin</em> se define como superusuario del GRUB y usar√° el hash PBKDF2 para autenticaci√≥n.</p>
<h3 is-upgraded>6.3 Actualizar GRUB y aplicar permisos</h3>
<p>Actualizar la configuraci√≥n del GRUB y restringir permisos:</p>
<ul>
<li><strong><em>sudo update-grub</em></strong></li>
<li><strong><em>sudo chmod 600 /boot/grub/grub.cfg</em></strong></li>
<li><strong><em>sudo chown root:root /boot/grub/grub.cfg</em></strong></li>
<li><strong><em>sudo chmod 700 /etc/grub.d/40_custom</em></strong></li>
</ul>
<p class="image-container"><img alt="Imagen13" src="img\c79e4d617e1bfefc.png"></p>
<p>Estos permisos garantizan que solo <strong>root</strong> pueda leer o modificar la configuraci√≥n cr√≠tica del gestor de arranque.</p>
<h3 is-upgraded>6.4 Ocultar el men√∫ del GRUB</h3>
<ul>
<li>Editar el archivo de configuraci√≥n por defecto con el comando: <strong><em>sudo nano /etc/default/grub</em></strong></li>
<li>Modificar la variable <strong><em>GRUB_TIMEOUT=0</em></strong> para que el men√∫ del GRUB no aparezca durante el arranque.</li>
</ul>
<p>El sistema arrancar√° directamente sin mostrar el men√∫ del GRUB, evitando accesos no autorizados al gestor de arranque.</p>
<h2 is-upgraded>Paso 7: Restringir permisos del kernel</h2>
<p>Aplicar permisos restrictivos sobre los binarios y archivos del kernel ubicados en <strong><em>/boot</em></strong> a trav√©s de los siguientes comandos:</p>
<p class="image-container"><img alt="Imagen14" src="img\55922409f3212157.png"></p>
<p>Con el objetivo de prevenir lecturas o modificaciones no autorizadas de los artefactos cr√≠ticos del kernel, protegiendo as√≠ la integridad del sistema.</p>
<h2 is-upgraded>Paso 8: Configuraci√≥n de montajes seguros en /etc/fstab</h2>
<p>El archivo /etc/fstab define c√≥mo se montan las particiones del sistema. Aplicar opciones restrictivas reduce el riesgo de ejecuci√≥n de c√≥digo malicioso o de escaladas de privilegios.</p>
<h3 is-upgraded>8.1 Crear copia de seguridad y editar /etc/fstab</h3>
<ul>
<li>Antes de editar el archivo realiza una copia de seguridad: <strong><em>sudo cp /etc/fstab /etc/fstab.bak</em></strong></li>
<li>Abrir el archivo con privilegios de administrador: <strong><em>sudo nano /etc/fstab</em></strong>.</li>
<li>Editar el archivo de la siguiente forma:</li>
</ul>
<p class="image-container"><img alt="Imagen15" src="img\8fe522025d2c250.png"></p>
<p>Opciones de seguridad:</p>
<ul>
<li>"<strong>nodev</strong>: evita el uso de dispositivos especiales."</li>
<li>"<strong>nosuid</strong>: bloquea la ejecuci√≥n con privilegios elevados (SUID/SGID)."</li>
<li>"<strong>noexec</strong>: impide ejecutar binarios desde ese sistema de archivos."</li>
<li>"<strong>ro</strong>: monta el sistema de solo lectura (aplicable a /boot)."</li>
</ul>
<h3 is-upgraded>8.2 Aplicar las nuevas opciones de montaje</h3>
<p class="image-container"><img alt="Imagen16" src="img\d627ab26d8d88007.png"></p>
    </google-codelab-step>

    <google-codelab-step label="Conclusi√≥n" duration="1">
      <p>Mediante las configuraciones aplicadas se ha logrado:</p>
<ul>
<li>Proteger el <strong>gestor de arranque GRUB</strong> con contrase√±a cifrada y permisos restringidos.</li>
<li>Asegurar la <strong>integridad del kernel</strong> mediante permisos seguros sobre los binarios del sistema.</li>
<li>Implementar <strong>montajes seguros</strong> que previenen la ejecuci√≥n o manipulaci√≥n indebida de archivos en directorios sensibles.</li>
<li>Incorporar <strong>copias de seguridad preventivas</strong> antes de modificar archivos cr√≠ticos, garantizando la capacidad de recuperaci√≥n ante errores de configuraci√≥n.</li>
</ul>
<p>Estas medidas fortalecen el bastionado del arranque de <strong>Ubuntu Server</strong>, garantizando un entorno m√°s robusto frente a accesos no autorizados.</p>
    </google-codelab-step>

  </google-codelab>

  <script src="https://storage.googleapis.com/claat-public/native-shim.js"></script>
  <script src="https://storage.googleapis.com/claat-public/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/claat-public/prettify.js"></script>
  <script src="https://storage.googleapis.com/claat-public/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>

  <script>
    // ========== SISTEMA DE TOGGLE DE TEMA ==========
    (function() {
      const html = document.documentElement;
      const themeToggle = document.getElementById('theme-toggle');
      const themeIcon = document.getElementById('theme-icon');

      // Cargar tema guardado (por defecto: claro)
      const savedTheme = localStorage.getItem('codelab-theme') || 'light';
      html.setAttribute('data-theme', savedTheme);
      updateThemeIcon(savedTheme);

      // Aplicar estilos al shadow DOM cuando est√© disponible
      applyThemeToShadowDOM(savedTheme);

      // Toggle al hacer clic
      themeToggle.addEventListener('click', function() {
        const currentTheme = html.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

        html.setAttribute('data-theme', newTheme);
        localStorage.setItem('codelab-theme', newTheme);
        updateThemeIcon(newTheme);
        applyThemeToShadowDOM(newTheme);
      });

      // Actualizar icono seg√∫n el tema (ICONOS DEL PORTFOLIO)
      function updateThemeIcon(theme) {
        themeIcon.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåì';
      }

      // Aplicar estilos al Shadow DOM del codelab
      function applyThemeToShadowDOM(theme) {
        const codelab = document.querySelector('google-codelab');
        if (codelab && codelab.shadowRoot) {
          const shadowRoot = codelab.shadowRoot;

          // Buscar o crear el style tag
          let style = shadowRoot.querySelector('#custom-theme-style');
          if (!style) {
            style = document.createElement('style');
            style.id = 'custom-theme-style';
            shadowRoot.appendChild(style);
          }

          // Aplicar estilos seg√∫n el tema
          if (theme === 'dark') {
            style.textContent = `
              #drawer {
                background: #000000 !important;
              }

              #steps {
                background: #000000 !important;
              }

              .step {
                color: #ffffff !important;
                background: #000000 !important;
              }

              .step.selected {
                background: rgba(143, 179, 255, 0.15) !important;
                border-left: 3px solid #8fb3ff !important;
              }

              .step:hover {
                background: rgba(255, 255, 255, 0.08) !important;
              }

              #drawer h2,
              #drawer h3,
              #drawer span,
              #drawer div,
              #steps span,
              #steps div {
                color: #ffffff !important;
              }
            `;
          } else {
            style.textContent = `
              #drawer {
                background: #ffffff !important;
              }

              #steps {
                background: #ffffff !important;
              }

              .step {
                color: #202124 !important;
                background: #ffffff !important;
              }

              .step.selected {
                color: #1a73e8 !important;
                background: rgba(26, 115, 232, 0.08) !important;
                border-left: 3px solid #1a73e8 !important;
              }

              .step:hover {
                background: #f8f9fa !important;
              }

              #drawer h2,
              #drawer h3,
              #drawer span,
              #drawer div,
              #steps span,
              #steps div {
                color: #202124 !important;
              }
            `;
          }
        }
      }

      // Intentar aplicar estilos cuando el DOM est√© listo
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
          setTimeout(() => applyThemeToShadowDOM(savedTheme), 100);
          setTimeout(() => applyThemeToShadowDOM(savedTheme), 500);
          setTimeout(() => applyThemeToShadowDOM(savedTheme), 1000);
        });
      } else {
        setTimeout(() => applyThemeToShadowDOM(savedTheme), 100);
        setTimeout(() => applyThemeToShadowDOM(savedTheme), 500);
        setTimeout(() => applyThemeToShadowDOM(savedTheme), 1000);
      }

      // Observar cambios en el DOM
      const observer = new MutationObserver(() => {
        applyThemeToShadowDOM(html.getAttribute('data-theme'));
      });

      setTimeout(() => {
        const codelab = document.querySelector('google-codelab');
        if (codelab) {
          observer.observe(codelab, { childList: true, subtree: true });
        }
      }, 500);
    })();
  </script>

</body>
</html>